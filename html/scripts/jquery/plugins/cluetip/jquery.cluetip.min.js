/*!
 * jQuery clueTip plugin - v1.2.8 - 2013-02-20
 * Copyright (c) 2013 Karl Swedberg
 * Licensed MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function(t){t.cluetip={version:"1.2.8",template:["<div>",'<div class="cluetip-outer">','<h3 class="cluetip-title ui-widget-header ui-cluetip-header"></h3>','<div class="cluetip-inner ui-widget-content ui-cluetip-content"></div>',"</div>",'<div class="cluetip-extra"></div>',"</div>"].join(""),setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:!1,width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,snapToEdge:!1,local:!1,localPrefix:null,localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,delayedClose:50,activation:"hover",clickThrough:!0,tracking:!1,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(t){return t=t.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var e,i="cluetip ui-widget ui-widget-content ui-cluetip",o={},a=0,l=0;t.fn.attrProp=t.fn.prop||t.fn.attr,t.fn.cluetip=function(s,n){function c(e,i){var o=e||"";return i=i||"","object"==typeof i?t.each(i,function(t,e){o+="-"+t+"-"+e}):"string"==typeof i&&(o+=i),o}function u(e,i,o){var a="",l=i.dropShadow&&i.dropShadowSteps?+i.dropShadowSteps:0;if(t.support.boxShadow)return l&&(a="1px 1px "+l+"px rgba(0,0,0,0.5)"),e.css(t.support.boxShadow,a),!1;var s=e.find(".cluetip-drop-shadow");if(l==s.length)return s;s.remove();for(var n=[],c=0;l>c;)n[c++]='<div style="top:'+c+"px;left:"+c+'px;"></div>';return o=t(n.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:g-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(e)}var r,p,d,f,h,m;if("object"==typeof s&&(n=s,s=null),"destroy"==s){var v=this.data("cluetip");return v&&(t(v.selector).remove(),t.removeData(this,"title"),t.removeData(this,"cluetip"),t.removeData(this,"cluetipMoc")),t(document).unbind(".cluetip"),this.unbind(".cluetip")}n=t.extend(!0,{},t.cluetip.defaults,n||{}),a++;var g,b=t.cluetip.backCompat||!n.multiple?"cluetip":"cluetip-"+a,x="#"+b,w=t.cluetip.backCompat?"#":".",y=t.cluetip.setup.insertionType,C=t.cluetip.setup.insertionElement||"body";y=/appendTo|prependTo|insertBefore|insertAfter/.test(y)?y:"appendTo",r=t(x),r.length||(r=t(t.cluetip.template)[y](C).attr("id",b).css({position:"absolute",display:"none"}),g=+n.cluezIndex,d=r.find(w+"cluetip-outer").css({position:"relative",zIndex:g}),p=r.find(w+"cluetip-inner"),f=r.find(w+"cluetip-title"),r.bind("mouseenter mouseleave",function(e){t(this).data("entered","mouseenter"===e.type)})),e=t("#cluetip-waitimage"),!e.length&&n.waitImage&&(e=t("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"}),e.insertBefore(r).hide());var S=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0);return this.each(function(a){function v(){return!1}function b(t,e){var i=t.status;e.beforeSend(t.xhr,e),"error"==i?e[i](t.xhr,t.textStatus):"success"==i&&e[i](t.data,t.textStatus,t.xhr),e.complete(t.xhr,e.textStatus)}var y=this,C=t(this),I=t.extend(!0,{},n,t.metadata?C.metadata():t.meta?C.data():C.data("cluetip")||{}),T=!1,k=!1,j=null,z=I[I.attribute]||("href"==I.attribute?C.attr(I.attribute):C.attrProp(I.attribute)||C.attr(I.attribute)),B=I.cluetipClass;if(g=+I.cluezIndex,C.data("cluetip",{title:y.title,zIndex:g,selector:x}),I.arrows&&!r.find(".cluetip-arrows").length&&r.append('<div class="cluetip-arrows ui-state-default"></div>'),!z&&!I.splitTitle&&!s)return!0;I.local&&I.localPrefix&&(z=I.localPrefix+z),I.local&&I.hideLocal&&z&&t(z+":first").hide();var O,P,M,A,L,N,E,Y,D,H,X,R,W,$,q=parseInt(I.topOffset,10),Q=parseInt(I.leftOffset,10),U=isNaN(parseInt(I.height,10))?"auto":/\D/g.test(I.height)?I.height:I.height+"px",F=parseInt(I.width,10)||275,G=F+S+I.dropShadowSteps,J=this.offsetWidth,K="title"!=I.attribute?C.attr(I.titleAttribute)||"":"";I.splitTitle&&($=K.split(I.splitTitle),K=I.showTitle||""===$[0]?$.shift():""),I.escapeTitle&&(K=K.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")),C.bind("mouseenter mouseleave",function(t){var e=C.data("cluetip");e.entered="entered"===t.type,C.data("cluetip",e)});var V=function(i){var u,m,v,g=I.onActivate.call(y,i);if(g===!1)return!1;if(k=!0,r=t(x).css({position:"absolute"}),d=r.find(w+"cluetip-outer"),p=r.find(w+"cluetip-inner"),f=r.find(w+"cluetip-title"),h=r.find(w+"cluetip-arrows"),r.removeClass().css({width:F}),z==C.attr("href")&&C.css("cursor",I.cursor),I.hoverClass&&C.addClass(I.hoverClass),A=N=C.offset().top,L=A+C.innerHeight(),H=C.offset().left,J=C.innerWidth(),i.type==focus?(R=H+J/2+Q,r.css({left:X}),Y=N+q):(R=i.pageX,Y=i.pageY),"area"!=y.tagName.toLowerCase()&&(M=t(document).scrollTop(),W=t(window).width()),"fixed"==I.positionBy?(X=J+H+Q,r.css({left:X})):(X=J>H&&H>G||H+J+G+Q>W?H-G-Q:J+H+Q,("area"==y.tagName.toLowerCase()||"mouse"==I.positionBy||J+G>W)&&(R+20+G>W?(r.addClass("cluetip-"+B),X=R-G-Q>=0?R-G-Q-parseInt(r.css("marginLeft"),10)+parseInt(p.css("marginRight"),10):R-G/2):X=R+Q),u=0>X?i.pageY+q:i.pageY,(0>X||"bottomTop"==I.positionBy||"topBottom"==I.positionBy)&&(X=R+G/2>W?W/2-G/2:Math.max(R-G/2,0))),h.css({zIndex:C.data("cluetip").zIndex+1}),r.css({left:X,zIndex:C.data("cluetip").zIndex}),P=t(window).height(),s)"function"==typeof s&&(s=s.call(y)),p.html(s),Z(u);else if($){var S=$.length;if(p.html(S?$[0]:""),S>1)for(var j=1;S>j;j++)p.append('<div class="split-body">'+$[j]+"</div>");Z(u)}else if(I.local||0===z.indexOf("#")){if(I.local){var O=t(z+(/^#\S+$/.test(z)?"":":eq("+a+")")).clone(!0).show();I.localIdSuffix&&O.attr("id",O[0].id+I.localIdSuffix),p.html(O),Z(u)}}else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(z))p.html('<img src="'+z+'" alt="'+K+'" />'),Z(u);else{var E=I.ajaxSettings.beforeSend,D=I.ajaxSettings.error,U=I.ajaxSettings.success,V=I.ajaxSettings.complete;v=c(z,I.ajaxSettings.data);var _={cache:I.ajaxCache,url:z,beforeSend:function(t,i){E&&E.call(y,t,r,p,i),d.children().empty(),I.waitImage&&e.css({top:Y+20,left:R+20,zIndex:C.data("cluetip").zIndex-1}).show()},error:function(t,e){n.ajaxCache&&!o[v]&&(o[v]={status:"error",textStatus:e,xhr:t}),k&&(D?D.call(y,t,e,r,p):p.html("<i>sorry, the contents could not be loaded</i>"))},success:function(t,e,i){n.ajaxCache&&!o[v]&&(o[v]={status:"success",data:t,textStatus:e,xhr:i}),T=I.ajaxProcess.call(y,t),"object"==typeof T&&null!==T&&(K=T.title,T=T.content),k&&(U&&U.call(y,t,e,r,p),p.html(T))},complete:function(i,o){V&&V.call(y,i,o,r,p);var a=p[0].getElementsByTagName("img");l=a.length;for(var s=0,n=a.length;n>s;s++)a[s].complete&&l--;l?t(a).bind("load.ct error.ct",function(){l--,0===l&&(e.hide(),t(a).unbind(".ct"),k&&Z(u))}):(e.hide(),k&&Z(u))}};m=t.extend(!0,{},I.ajaxSettings,_),o[v]?b(o[v],m):t.ajax(m)}},Z=function(e){var o,a,l,s=K||I.showTitle&&"&nbsp;",n="",c="",v=!1,g={bottom:function(t){t.appendTo(p)},top:function(t){t.prependTo(p)},title:function(t){t.prependTo(f)}};if(r.addClass("cluetip-"+B),I.truncate){var b=p.text().slice(0,I.truncate)+"...";p.html(b)}s?f.show().html(s):f.hide(),I.sticky&&(g[I.closePosition]&&(o=t('<div class="cluetip-close"><a href="#">'+I.closeText+"</a></div>"),g[I.closePosition](o),o.bind("click.cluetip",function(){return te(),!1})),I.mouseOutClose&&(C.unbind("mouseleave.cluetipMoc"),r.unbind("mouseleave.cluetipMoc"),("both"==I.mouseOutClose||"cluetip"==I.mouseOutClose||I.mouseOutClose===!0)&&r.bind("mouseleave.cluetipMoc",ee),("both"==I.mouseOutClose||"link"==I.mouseOutClose)&&C.bind("mouseleave.cluetipMoc",ee))),d.css({zIndex:C.data("cluetip").zIndex,overflow:"auto"==U?"visible":"auto",height:U}),O="auto"==U?Math.max(r.outerHeight(),r.height()):parseInt(U,10),E=N,D=M+P,v=R>X&&Math.max(X,0)+G>R,"fixed"==I.positionBy?E=N-I.dropShadowSteps+q:"topBottom"==I.positionBy||"bottomTop"==I.positionBy||v?("topBottom"==I.positionBy?c=D>N+O+q&&O+q>Y-M?"bottom":"top":("bottomTop"==I.positionBy||v)&&(c=N+O+q>D&&Y-M>O+q?"top":"bottom"),I.snapToEdge?"top"==c?E=A-O-q:"bottom"==c&&(E=L+q):"top"==c?E=Y-O-q:"bottom"==c&&(E=Y+q)):E=N+O+q>D?O>=P?M:D-O-q:"block"==C.css("display")||"area"==y.tagName.toLowerCase()||"mouse"==I.positionBy?e-q:N-I.dropShadowSteps,""===c&&(c=H>X?"left":"right"),a=" clue-"+c+"-"+B+" cluetip-"+B,"rounded"==B&&(a+=" ui-corner-all"),r.css({top:E+"px"}).attrProp({className:i+a}),I.arrows?(/(left|right)/.test(c)&&(l=r.height()-h.height(),n=X>=0&&e>0?N-E-I.dropShadowSteps:0,n=l>n?n:l,n+="px"),h.css({top:n}).show()):h.hide(),m=u(r,I),m&&m.length&&m.hide().css({height:O,width:F,zIndex:C.data("cluetip").zIndex-1}).show(),j||r.hide(),clearTimeout(j),j=null,r[I.fx.open](I.fx.openSpeed||0),t.fn.bgiframe&&r.bgiframe(),I.onShow.call(y,r,p)},_=function(){k=!1,e.hide(),(!I.sticky||/click|toggle/.test(I.activation))&&I.delayedClose>0&&(clearTimeout(j),j=null,j=setTimeout(te,I.delayedClose)),I.hoverClass&&C.removeClass(I.hoverClass)},te=function(e){var i=e&&e.data("cluetip")?e:C,o=i.data("cluetip")&&i.data("cluetip").selector,a=o||"div.cluetip",l=t(a),s=l.find(w+"cluetip-inner"),n=l.find(w+"cluetip-arrows");l.hide().removeClass(),I.onHide.call(i[0],l,s),o&&(i.removeClass("cluetip-clicked"),i.css("cursor","")),o&&K&&i.attrProp(I.titleAttribute,K),I.arrows&&n.css({top:""})},ee=function(){var t=this;clearTimeout(j),j=setTimeout(function(){var e=C.data("cluetip").entered,i=r.data("entered"),o=!1;"both"==I.mouseOutClose&&(e||i)?o=!0:I.mouseOutClose!==!0&&"cluetip"!=I.mouseOutClose||!i?"link"==I.mouseOutClose&&e&&(o=!0):o=!0,o||te.call(t)},I.delayedClose)};if(t(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(e){te(t(e.target))}),/click|toggle/.test(I.activation))C.bind("click.cluetip",function(e){return r.is(":hidden")||!C.is(".cluetip-clicked")?(V(e),t(".cluetip-clicked").removeClass("cluetip-clicked"),C.addClass("cluetip-clicked")):_(e),!1});else if("focus"==I.activation)C.bind("focus.cluetip",function(t){C.attrProp("title",""),V(t)}),C.bind("blur.cluetip",function(t){C.attrProp("title",C.data("cluetip").title),_(t)});else{C[I.clickThrough?"unbind":"bind"]("click.cluetip",v);var ie=function(t){if(I.tracking){var e=X-t.pageX,i=E?E-t.pageY:N-t.pageY;C.bind("mousemove.cluetip",function(t){r.css({left:t.pageX+e,top:t.pageY+i})})}};t.fn.hoverIntent&&I.hoverIntent?C.hoverIntent({sensitivity:I.hoverIntent.sensitivity,interval:I.hoverIntent.interval,over:function(t){V(t),ie(t)},timeout:I.hoverIntent.timeout,out:function(t){_(t),C.unbind("mousemove.cluetip")}}):C.bind("mouseenter.cluetip",function(t){V(t),ie(t)}).bind("mouseleave.cluetip",function(t){_(t),C.unbind("mousemove.cluetip")}),C.bind("mouseover.cluetip",function(){C.attrProp("title","")}).bind("mouseleave.cluetip",function(){C.attrProp("title",C.data("cluetip").title)})}}),this},function(){t.support=t.support||{};for(var e=document.createElement("div"),i=e.style,o=["boxShadow"],a=["moz","Moz","webkit","o"],l=0,s=o.length;s>l;l++){var n=o[l],c=n.charAt(0).toUpperCase()+n.slice(1);if(i[n]!==void 0)t.support[n]=n;else for(var u=0,r=a.length;r>u;u++)if(i[a[u]+c]!==void 0){t.support[n]=a[u]+c;break}}e=null}(),t.fn.cluetip.defaults=t.cluetip.defaults})(jQuery);